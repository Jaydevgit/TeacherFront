webpackJsonp([20],{ZPbt:function(n,t,a){var e=a("cJK4");"string"==typeof e&&(e=[[n.i,e,""]]),e.locals&&(n.exports=e.locals);a("rjj0")("da147462",e,!0)},cJK4:function(n,t,a){(n.exports=a("FZ+f")(!0)).push([n.i,"\n.dialog[data-v-3609d013] {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 2000;\n}\n.dialog .dialog-container[data-v-3609d013] {\n    width: 450px;\n    height: 300px;\n    background: #ffffff;\n    position: absolute;\n    top: 45%;\n    left: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    border-radius: 8px;\n    position: relative;\n}\n.dialog .dialog-container .dialog-title[data-v-3609d013] {\n      width: 100%;\n      height: 60px;\n      font-size: 18px;\n      color: #696969;\n      font-weight: 600;\n      padding: 16px 50px 0 20px;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\n.dialog .dialog-container .content[data-v-3609d013] {\n      color: #797979;\n      line-height: 26px;\n      padding: 0 20px;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\n.dialog .dialog-container .inp[data-v-3609d013] {\n      margin: 10px 0 0 20px;\n      width: 200px;\n      height: 40px;\n      padding-left: 4px;\n      border-radius: 4px;\n      border: none;\n      background: #efefef;\n      outline: none;\n}\n.dialog .dialog-container .inp[data-v-3609d013]:focus {\n        border: 1px solid #509EE3;\n}\n.dialog .dialog-container .btns[data-v-3609d013] {\n      width: 100%;\n      height: 60px;\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      text-align: center;\n      padding: 0 16px;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\n.dialog .dialog-container .btns > div[data-v-3609d013] {\n        display: inline-block;\n        height: 40px;\n        line-height: 40px;\n        padding: 0 14px;\n        color: #ffffff;\n        background: #f1f1f1;\n        border-radius: 8px;\n        margin-right: 12px;\n        cursor: pointer;\n}\n.dialog .dialog-container .btns .default-btn[data-v-3609d013] {\n        color: #787878;\n}\n.dialog .dialog-container .btns .default-btn[data-v-3609d013]:hover {\n          color: #509EE3;\n}\n.dialog .dialog-container .btns .danger-btn[data-v-3609d013] {\n        background: #EF8C8C;\n}\n.dialog .dialog-container .btns .danger-btn[data-v-3609d013]:hover {\n          background: #e08787;\n}\n.dialog .dialog-container .btns .danger-btn[data-v-3609d013]:active {\n          background: #EF8C8C;\n}\n.dialog .dialog-container .btns .confirm-btn[data-v-3609d013] {\n        color: #ffffff;\n        background: #509EE3;\n}\n.dialog .dialog-container .btns .confirm-btn[data-v-3609d013]:hover {\n          background: #6FB0EB;\n}\n.dialog .dialog-container .close-btn[data-v-3609d013] {\n      position: absolute;\n      top: 16px;\n      right: 16px;\n      width: 30px;\n      height: 30px;\n      line-height: 30px;\n      text-align: center;\n      font-size: 18px;\n      cursor: pointer;\n}\n.dialog .dialog-container .close-btn[data-v-3609d013]:hover {\n        font-weight: 600;\n}\n.el-dropdown[data-v-3609d013] {\n  vertical-align: top;\n}\n.el-dropdown + .el-dropdown[data-v-3609d013] {\n  margin-left: 15px;\n}\n.el-icon-arrow-down[data-v-3609d013] {\n  font-size: 12px;\n}\n","",{version:3,sources:["/Users/achunorigin/project/A_Postgraduate/persona-teacher/persona-teacherHome-front/src/views/manager/components/roleAssignment.vue"],names:[],mappings:";AACA;EACE,gBAAgB;EAChB,OAAO;EACP,UAAU;EACV,QAAQ;EACR,SAAS;EACT,+BAA+B;EAC/B,cAAc;CACf;AACD;IACI,aAAa;IACb,cAAc;IACd,oBAAoB;IACpB,mBAAmB;IACnB,SAAS;IACT,UAAU;IACV,yCAAyC;YACjC,iCAAiC;IACzC,mBAAmB;IACnB,mBAAmB;CACtB;AACD;MACM,YAAY;MACZ,aAAa;MACb,gBAAgB;MAChB,eAAe;MACf,iBAAiB;MACjB,0BAA0B;MAC1B,+BAA+B;cACvB,uBAAuB;CACpC;AACD;MACM,eAAe;MACf,kBAAkB;MAClB,gBAAgB;MAChB,+BAA+B;cACvB,uBAAuB;CACpC;AACD;MACM,sBAAsB;MACtB,aAAa;MACb,aAAa;MACb,kBAAkB;MAClB,mBAAmB;MACnB,aAAa;MACb,oBAAoB;MACpB,cAAc;CACnB;AACD;QACQ,0BAA0B;CACjC;AACD;MACM,YAAY;MACZ,aAAa;MACb,mBAAmB;MACnB,UAAU;MACV,QAAQ;MACR,mBAAmB;MACnB,gBAAgB;MAChB,+BAA+B;cACvB,uBAAuB;CACpC;AACD;QACQ,sBAAsB;QACtB,aAAa;QACb,kBAAkB;QAClB,gBAAgB;QAChB,eAAe;QACf,oBAAoB;QACpB,mBAAmB;QACnB,mBAAmB;QACnB,gBAAgB;CACvB;AACD;QACQ,eAAe;CACtB;AACD;UACU,eAAe;CACxB;AACD;QACQ,oBAAoB;CAC3B;AACD;UACU,oBAAoB;CAC7B;AACD;UACU,oBAAoB;CAC7B;AACD;QACQ,eAAe;QACf,oBAAoB;CAC3B;AACD;UACU,oBAAoB;CAC7B;AACD;MACM,mBAAmB;MACnB,UAAU;MACV,YAAY;MACZ,YAAY;MACZ,aAAa;MACb,kBAAkB;MAClB,mBAAmB;MACnB,gBAAgB;MAChB,gBAAgB;CACrB;AACD;QACQ,iBAAiB;CACxB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,kBAAkB;CACnB;AACD;EACE,gBAAgB;CACjB",file:"roleAssignment.vue",sourcesContent:["\n.dialog[data-v-3609d013] {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 2000;\n}\n.dialog .dialog-container[data-v-3609d013] {\n    width: 450px;\n    height: 300px;\n    background: #ffffff;\n    position: absolute;\n    top: 45%;\n    left: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    border-radius: 8px;\n    position: relative;\n}\n.dialog .dialog-container .dialog-title[data-v-3609d013] {\n      width: 100%;\n      height: 60px;\n      font-size: 18px;\n      color: #696969;\n      font-weight: 600;\n      padding: 16px 50px 0 20px;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\n.dialog .dialog-container .content[data-v-3609d013] {\n      color: #797979;\n      line-height: 26px;\n      padding: 0 20px;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\n.dialog .dialog-container .inp[data-v-3609d013] {\n      margin: 10px 0 0 20px;\n      width: 200px;\n      height: 40px;\n      padding-left: 4px;\n      border-radius: 4px;\n      border: none;\n      background: #efefef;\n      outline: none;\n}\n.dialog .dialog-container .inp[data-v-3609d013]:focus {\n        border: 1px solid #509EE3;\n}\n.dialog .dialog-container .btns[data-v-3609d013] {\n      width: 100%;\n      height: 60px;\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      text-align: center;\n      padding: 0 16px;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\n.dialog .dialog-container .btns > div[data-v-3609d013] {\n        display: inline-block;\n        height: 40px;\n        line-height: 40px;\n        padding: 0 14px;\n        color: #ffffff;\n        background: #f1f1f1;\n        border-radius: 8px;\n        margin-right: 12px;\n        cursor: pointer;\n}\n.dialog .dialog-container .btns .default-btn[data-v-3609d013] {\n        color: #787878;\n}\n.dialog .dialog-container .btns .default-btn[data-v-3609d013]:hover {\n          color: #509EE3;\n}\n.dialog .dialog-container .btns .danger-btn[data-v-3609d013] {\n        background: #EF8C8C;\n}\n.dialog .dialog-container .btns .danger-btn[data-v-3609d013]:hover {\n          background: #e08787;\n}\n.dialog .dialog-container .btns .danger-btn[data-v-3609d013]:active {\n          background: #EF8C8C;\n}\n.dialog .dialog-container .btns .confirm-btn[data-v-3609d013] {\n        color: #ffffff;\n        background: #509EE3;\n}\n.dialog .dialog-container .btns .confirm-btn[data-v-3609d013]:hover {\n          background: #6FB0EB;\n}\n.dialog .dialog-container .close-btn[data-v-3609d013] {\n      position: absolute;\n      top: 16px;\n      right: 16px;\n      width: 30px;\n      height: 30px;\n      line-height: 30px;\n      text-align: center;\n      font-size: 18px;\n      cursor: pointer;\n}\n.dialog .dialog-container .close-btn[data-v-3609d013]:hover {\n        font-weight: 600;\n}\n.el-dropdown[data-v-3609d013] {\n  vertical-align: top;\n}\n.el-dropdown + .el-dropdown[data-v-3609d013] {\n  margin-left: 15px;\n}\n.el-icon-arrow-down[data-v-3609d013] {\n  font-size: 12px;\n}\n"],sourceRoot:""}])},pt3A:function(n,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("mvHQ");var e={name:"roleAssignment",props:{value:{},type:{type:String,default:"default"},content:{type:String,default:""},title:{type:String,default:"教师分配"},cancelText:{type:String,default:"取消分配"},confirmText:{type:String,default:"完成分配"},RoleId:""},data:function(){return{fff:!1,isAble:[!1],showMask:!1,listQuery:{unitId:"",catalogue:""},catalogueList:[],catalogueList_t:[],values:[],teacherList:[],CataloguesIds:[],selectedAllCatalogueIds:[],catalogueRoleId:"",catalogueId:"",selectedOptions:[]}},methods:{closeMask:function(){this.showMask=!1},closeBtn:function(){this.$emit("cancel");for(var n=0;n<this.values.length;n++)this.values[n]=null;this.closeMask()},confirmBtn:function(){this.addAllCatalogueTeacher();for(var n=0;n<this.values.length;n++)this.values[n]=null;this.$emit("confirm"),this.closeMask()},getTeacherAllCatalogues:function(n){var t=this;this.api({url:"/catalogue/getTeacherAllCatalogues",method:"get",params:{tId:n}}).then(function(n){for(var a in t.CataloguesIds=n.list,t.catalogueList_t=t.catalogueList,t.CataloguesIds){var e=t.CataloguesIds[a].cCatalogue_id;for(var o in t.catalogueList)if(t.catalogueList[o].id!=e){var i=t.catalogueList[o].subCatalogueList;if(0!=i.length)for(var l in i)i[l].id==e&&t.catalogueList_t[o].subCatalogueList.splice(l,1)}else t.catalogueList_t.splice(o,1)}}).catch(function(n){})},getTeacherByCatalogueId:function(n,t){var a=this;this.api({url:"/catalogue/getTeacherByCatalogueId",method:"get",params:{tId:n,cId:t}}).then(function(n){a.catalogueRoleId=n.list[0],a.catalogueId=t}).catch(function(n){})},checkCataloguerList:function(n,t){this.selectedAllCatalogueIds[t]=n;for(var a=0;a<this.CataloguesIds.length;a++)if(this.isAble[t]=!1,this.CataloguesIds[a].cCatalogue_id==n)return this.$message({type:"warning",message:"该教师已经存在在此栏目，请重新选择！"}),this.isAble[t]=!0,!1;return!0},addCatalogueTeacher:function(){var n=this;this.api({url:"/catalogue/addCatalogueTeacher",method:"post",data:{tIds:this.RoleId,cId:this.catalogueId}}).then(function(t){n.$message.success("添加成功")}).catch(function(t){n.$message.warning("请勾选要分配的教师栏目")})},addAllCatalogueTeacher:function(){for(var n=this,t=[],a=0;a<this.selectedAllCatalogueIds.length;a++){if(!this.checkCataloguerList(this.selectedAllCatalogueIds[a]))return this.$message({type:"error",message:"分配失败,请重新选择！"}),!1;null!=this.selectedAllCatalogueIds[a]&&t.push(this.selectedAllCatalogueIds[a])}this.api({url:"/catalogue/addCatalogueTeacher",method:"post",data:{tIds:this.RoleId,cId:t}}).then(function(t){n.$message.success("添加成功")}).catch(function(t){n.$message.warning("请重新分配的教师")})},getCatalogues:function(){var n=this;this.listQuery.unitId=this.$store.state.user.unitId,this.api({url:"/catalogue/getCatalogues",method:"get",params:this.listQuery}).then(function(t){n.catalogueList=t.list}).catch(function(n){})},updateCatalogues:function(n,t){var a=this;this.api({url:"/catalogue/updateCatalogueTeacher",method:"post",data:{ctId:t,cId:n}}).then(function(n){a.$message.success("更改教师角色分配成功")}).catch(function(n){a.$message.error("QAQ.....")})}},created:function(){this.getCatalogues(),this.getTeacherByCatalogueId()},mounted:function(){this.showMask=this.value},watch:{value:function(n,t){this.showMask=n},showMask:function(n){this.$emit("input",n)}}},o=a("XyMi");var i=function(n){a("ZPbt")},l=Object(o.a)(e,function(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{directives:[{name:"show",rawName:"v-show",value:n.showMask,expression:"showMask"}],staticClass:"dialog"},[a("div",{staticClass:"dialog-container"},[a("div",{staticClass:"dialog-title"},[n._v("教师分配")]),n._v(" "),n._l(n.catalogueList_t,function(t,e){return a("div",{key:"cId"+t.id,staticStyle:{"margin-bottom":"10px","text-align":"center"}},[0!=Object.keys(t.subCatalogueList).length?a("el-select",{attrs:{placeholder:t.name},model:{value:n.values[e],callback:function(t){n.$set(n.values,e,t)},expression:"values[flag]"}},n._l(t.subCatalogueList,function(t){return a("el-option",{key:t.name,attrs:{label:t.label,value:t.name},nativeOn:{click:function(a){n.getTeacherByCatalogueId(n.RoleId,t.id),n.checkCataloguerList(t.id,e)}}})})):n._e(),n._v(" "),0===Object.keys(t.subCatalogueList).length?a("el-select",{attrs:{placeholder:t.name},model:{value:n.values[e],callback:function(t){n.$set(n.values,e,t)},expression:"values[flag]"}},[a("el-option",{key:t.name,attrs:{label:t.label,value:t.name},nativeOn:{click:function(a){n.getTeacherByCatalogueId(n.RoleId,t.id),n.checkCataloguerList(t.id,e)}}})],1):n._e()],1)}),n._v(" "),a("div",{staticClass:"btns"},["confirm"!==n.type?a("div",{staticClass:"default-btn",on:{click:n.closeBtn}},[n._v("\n          "+n._s(n.cancelText)+"\n        ")]):n._e(),n._v(" "),a("div",{staticClass:"confirm-btn",staticStyle:{"margin-left":"20px"},on:{click:n.confirmBtn}},[n._v("\n          "+n._s(n.confirmText)+"\n        ")])]),n._v(" "),a("div",{staticClass:"close-btn",on:{click:n.closeMask}},[a("i",{staticClass:"iconfont icon-close"})])],2)])},[],!1,i,"data-v-3609d013",null);t.default=l.exports}});