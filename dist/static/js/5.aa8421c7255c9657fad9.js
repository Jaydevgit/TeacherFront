webpackJsonp([5,20],{J72O:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("4O9d"),i=(n("IcnI"),n("pt3A")),o={components:{teacherPersonalHomePage:a.default,"v-role-assignment-bar":i.default},data:function(){return{defaultImage:'this.src="../../src/assets/img/defaultAvatar.png"',searchKey:"",totalCount:0,totalUpdate:0,list:[],listLoading:!1,listQuery:{pageNum:1,pageRow:10,unitId:"",key:""},currentSearch:"false",dialogStatus:"create",dialogFormVisible:!1,textMap:{update:"编辑",create:"添加新成员"},tempTeacher:{id:"",name:"",sex:0,avatar:"",department:"",post:"",state:1,intro:"",update_time:"",email:"",phone:""},showMask:!1,showRoleAssigment:!1,roleId:""}},created:function(){this.getList()},methods:{inviteToScholat:function(t){var e=this;this.$confirm("此操作将会给该用户发送邀请邮件, 是否继续?","提示",{confirmButtonText:"确认发送邀请",cancelButtonText:"取消",type:"success"}).then(function(){e.$message.success("准备邀请"+t.email+"加入学者网"),e.api({url:"/scholat/invite",method:"post",data:{form:t}}).then(function(n){e.$message.success("邀请"+t.email+"成功")}).catch(function(n){e.$message.error("邀请"+t.email+"失败")})}).catch(function(){e.$message({type:"info",message:"已取消邀请"})})},updateFromScholat:function(){this.$message.error("正在写")},searchTeahcer:function(){var t=this;this.listQuery.pageNum=1,this.listQuery.unitId=this.$store.state.user.unitId,this.listQuery.key=this.searchKey,null!=this.searchKey&&""!=this.searchKey&&this.api({url:"/manager/searchTeacher",method:"get",params:this.listQuery}).then(function(e){t.list=e.list,t.totalCount=e.totalCount,t.totalUpdate=e.totalUpdate,t.currentSearch=!0}).catch(function(t){})},changeTeahcer:function(){var t=this;this.listQuery.unitId=this.$store.state.user.unitId,this.listQuery.key=this.searchKey,this.api({url:"/manager/searchTeacher",method:"get",params:this.listQuery}).then(function(e){t.list=e.list,t.totalCount=e.totalCount,t.totalUpdate=e.totalUpdate}).catch(function(t){})},removeTeacher:function(t){var e=this,n=this;this.$confirm("确定删除该教师?","提示",{confirmButtonText:"确定",showCancelButton:!1,type:"warning"}).then(function(){n.api({url:"/manager/deleteTeacher",method:"post",data:{teacherId:t}}).then(function(t){e.$message.success("删除该教师成功"),e.getList()}).catch(function(t){e.$message.error("QAQ.....")})})},getState:function(t){return 1==t?"在岗":0==t?"调出":"退休"},getImgUrl:function(t){return null==t?"":"-1"!=t.indexOf("resources")?"http://www.scholat.com/"+t:"http://47.106.132.95:2333/images/avatar/"+t},routerTo:function(t){var e=this.$router.resolve({name:"teacherPersonlHomePage",params:{id:t.id}});window.open(e.href,"_blank")},getList:function(){var t=this;this.hasPerm("teacher:list")&&(this.listQuery.pageNum=1,this.listQuery.unitId=this.$store.state.user.unitId,this.listLoading=!0,this.api({url:"/manager/listTeacher",method:"get",params:this.listQuery}).then(function(e){t.listLoading=!1,t.list=e.list,t.list.forEach(function(t,e){var n=t.update_time.replace(/\./g,"-").slice(0,16);t.update_time=n}),t.totalCount=e.totalCount,t.totalUpdate=e.totalUpdate,t.currentSearch=!1}).catch(function(t){}))},changeList:function(){var t=this;this.hasPerm("teacher:list")&&(this.listQuery.unitId=this.$store.state.user.unitId,this.listLoading=!0,this.api({url:"/manager/listTeacher",method:"get",params:this.listQuery}).then(function(e){t.listLoading=!1,t.list=e.list,t.totalCount=e.totalCount,t.totalUpdate=e.totalUpdate}).catch(function(t){}))},handleSizeChange:function(t){this.listQuery.pageRow=t,this.handleFilter()},handleCurrentChange:function(t){this.listQuery.pageNum=t,this.currentSearch?this.changeTeahcer():this.changeList()},getIndex:function(t){return(this.listQuery.pageNum-1)*this.listQuery.pageRow+t+1},showCreate:function(){this.$router.push({path:"/manager/addTeacher"})},showUpdate:function(t){var e=new Date(t.scholat_update_time),n=new Date(t.update_time),a="";e.getTime()>n.getTime()&&(a=t.scholat_username),this.$router.push({name:"modifyTeacher",params:{t:t,id:t.id,scholatUpdate:a}})},openQuery:function(){this.showMask=!0},openAssignment:function(t){this.showRoleAssigment=!0,this.roleId=t,this.$notify({title:"提示",message:"本页面教师分配只展示未分配栏目。若需要管理教师已分配栏目，请到教师分配页面进行管理。",type:"info",position:"bottom-left"}),this.$refs.childRole.getTeacherAllCatalogues(t)}}},s=n("XyMi");var r=function(t){n("nZZb")},l=Object(s.a)(o,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("div",{staticClass:"filter-container"},[n("el-form",[n("el-form-item",[t.hasPerm("teacher:add")?n("el-button",{staticStyle:{float:"left"},attrs:{type:"primary",icon:"plus"},on:{click:t.showCreate}},[t._v("添加\n        ")]):t._e(),t._v(" "),n("el-button",{staticStyle:{float:"right","margin-right":"15px","margin-top":"3px"},attrs:{size:"small",type:"success",icon:"plus"},on:{click:t.getList}},[t._v("所有教师\n        ")]),t._v(" "),n("el-button",{staticStyle:{float:"right","margin-right":"15px","margin-top":"3px"},attrs:{type:"primary",size:"small"},on:{click:t.searchTeahcer}},[t._v("搜索\n        ")]),t._v(" "),n("el-input",{staticStyle:{width:"150px",float:"right",height:"24px","margin-right":"15px"},attrs:{placeholder:"搜索要查询的信息"},nativeOn:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchTeahcer(e)}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}}),t._v(" "),n("el-input",{staticStyle:{display:"none"},attrs:{type:"text"}}),t._v(" "),t.totalUpdate>0?n("div",{staticStyle:{float:"right"}},[n("el-badge",{staticClass:"item",attrs:{value:t.totalUpdate,max:99}},[n("span",{staticStyle:{color:"red"}},[t._v("学者网有更新")])])],1):t._e(),t._v(" "),n("div",{staticStyle:{clear:"both"}})],1),t._v(" "),n("el-form-item",{staticStyle:{"margin-bottom":"0",display:"none"}})],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:t.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:t.list,"element-loading-text":"拼命加载中",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"序号",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{domProps:{textContent:t._s(t.getIndex(e.$index))}})]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"头像",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.scholat_update_time>e.row.update_time?[n("el-badge",{staticClass:"item",staticStyle:{"margin-top":"10px"},attrs:{"is-dot":"","aria-setsize":"14px"}},[n("img",{staticClass:"preview",staticStyle:{width:"60px",height:"60px",cursor:"pointer"},attrs:{src:t.getImgUrl(e.row.avatar),onerror:t.defaultImage},on:{click:function(n){t.routerTo(e.row)}}})])]:[n("img",{staticClass:"preview",staticStyle:{width:"60px",height:"60px",cursor:"pointer"},attrs:{src:t.getImgUrl(e.row.avatar)},on:{click:function(n){t.routerTo(e.row)}}})]]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"姓名",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"teacher-homepage",staticStyle:{cursor:"pointer"},on:{click:function(n){t.routerTo(e.row)}}},[t._v(t._s(e.row.name))]),t._v(" "),n("span")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"状态",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tag",{attrs:{type:"在岗"===e.row.state?"primary":"success","disable-transitions":""}},[n("span",{domProps:{textContent:t._s(t.getState(e.row.state))}})])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"职务",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.post))])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"学者网关联"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{staticStyle:{color:"#399","text-decoration":"underline","font-weight":"bold"},attrs:{href:"http://www.scholat.com/"+e.row.scholat_username}},[t._v(t._s(e.row.scholat_username))]),t._v(" "),e.row.scholat_update_time>e.row.update_time?[n("div",{staticStyle:{color:"#e6a23b","font-weight":"bold"}},[t._v("学者网有更新信息")])]:t._e(),t._v(" "),!e.row.scholat_update_time&&e.row.scholat_username?[n("div",{staticStyle:{color:"#848484","font-weight":"bold"}},[t._v("已绑定学者网账号，但未查询到学者网更新日期")])]:t._e(),t._v(" "),e.row.scholat_username?t._e():n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(n){t.inviteToScholat(e.row)}}},[t._v("邀请加入学者网\n        ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"更新时间",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.update_time))])]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",align:"center",label:"教师分配",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",icon:"el-icon-star-off",circle:""},on:{click:function(n){t.openAssignment(e.row.id)}}})]}}])}),t._v(" "),t.hasPerm("teacher:update")?n("el-table-column",{attrs:{fixed:"right",align:"center",label:"管理",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.scholat_update_time>e.row.update_time?[n("el-button",{attrs:{type:"warning",icon:"el-icon-edit",circle:""},on:{click:function(n){t.showUpdate(e.row)}}})]:[n("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(n){t.showUpdate(e.row)}}})],t._v(" "),t.hasPerm("teacher:delete")?n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(n){t.removeTeacher(e.row.id)}}}):t._e()]}}])}):t._e()],1),t._v(" "),n("el-pagination",{attrs:{"current-page":t.listQuery.pageNum,"page-size":t.listQuery.pageRow,total:t.totalCount,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),n("v-role-assignment-bar",{ref:"childRole",attrs:{RoleId:t.roleId,title:"教师分配"},model:{value:t.showRoleAssigment,callback:function(e){t.showRoleAssigment=e},expression:"showRoleAssigment"}})],1)},[],!1,r,null,null);e.default=l.exports},SEUm:function(t,e,n){(t.exports=n("FZ+f")(!0)).push([t.i,"\n.el-badge__content.is-dot {\n  width: 15px;\n  height: 15px;\n}\n","",{version:3,sources:["/Users/achunorigin/project/A_Postgraduate/persona-teacher/persona-teacherHome-front/src/views/manager/teacher.vue"],names:[],mappings:";AACA;EACE,YAAY;EACZ,aAAa;CACd",file:"teacher.vue",sourcesContent:["\n.el-badge__content.is-dot {\n  width: 15px;\n  height: 15px;\n}\n"],sourceRoot:""}])},ZPbt:function(t,e,n){var a=n("cJK4");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("da147462",a,!0)},cJK4:function(t,e,n){(t.exports=n("FZ+f")(!0)).push([t.i,"\n.dialog[data-v-3609d013] {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 2000;\n}\n.dialog .dialog-container[data-v-3609d013] {\n    width: 450px;\n    height: 300px;\n    background: #ffffff;\n    position: absolute;\n    top: 45%;\n    left: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    border-radius: 8px;\n    position: relative;\n}\n.dialog .dialog-container .dialog-title[data-v-3609d013] {\n      width: 100%;\n      height: 60px;\n      font-size: 18px;\n      color: #696969;\n      font-weight: 600;\n      padding: 16px 50px 0 20px;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\n.dialog .dialog-container .content[data-v-3609d013] {\n      color: #797979;\n      line-height: 26px;\n      padding: 0 20px;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\n.dialog .dialog-container .inp[data-v-3609d013] {\n      margin: 10px 0 0 20px;\n      width: 200px;\n      height: 40px;\n      padding-left: 4px;\n      border-radius: 4px;\n      border: none;\n      background: #efefef;\n      outline: none;\n}\n.dialog .dialog-container .inp[data-v-3609d013]:focus {\n        border: 1px solid #509EE3;\n}\n.dialog .dialog-container .btns[data-v-3609d013] {\n      width: 100%;\n      height: 60px;\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      text-align: center;\n      padding: 0 16px;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\n.dialog .dialog-container .btns > div[data-v-3609d013] {\n        display: inline-block;\n        height: 40px;\n        line-height: 40px;\n        padding: 0 14px;\n        color: #ffffff;\n        background: #f1f1f1;\n        border-radius: 8px;\n        margin-right: 12px;\n        cursor: pointer;\n}\n.dialog .dialog-container .btns .default-btn[data-v-3609d013] {\n        color: #787878;\n}\n.dialog .dialog-container .btns .default-btn[data-v-3609d013]:hover {\n          color: #509EE3;\n}\n.dialog .dialog-container .btns .danger-btn[data-v-3609d013] {\n        background: #EF8C8C;\n}\n.dialog .dialog-container .btns .danger-btn[data-v-3609d013]:hover {\n          background: #e08787;\n}\n.dialog .dialog-container .btns .danger-btn[data-v-3609d013]:active {\n          background: #EF8C8C;\n}\n.dialog .dialog-container .btns .confirm-btn[data-v-3609d013] {\n        color: #ffffff;\n        background: #509EE3;\n}\n.dialog .dialog-container .btns .confirm-btn[data-v-3609d013]:hover {\n          background: #6FB0EB;\n}\n.dialog .dialog-container .close-btn[data-v-3609d013] {\n      position: absolute;\n      top: 16px;\n      right: 16px;\n      width: 30px;\n      height: 30px;\n      line-height: 30px;\n      text-align: center;\n      font-size: 18px;\n      cursor: pointer;\n}\n.dialog .dialog-container .close-btn[data-v-3609d013]:hover {\n        font-weight: 600;\n}\n.el-dropdown[data-v-3609d013] {\n  vertical-align: top;\n}\n.el-dropdown + .el-dropdown[data-v-3609d013] {\n  margin-left: 15px;\n}\n.el-icon-arrow-down[data-v-3609d013] {\n  font-size: 12px;\n}\n","",{version:3,sources:["/Users/achunorigin/project/A_Postgraduate/persona-teacher/persona-teacherHome-front/src/views/manager/components/roleAssignment.vue"],names:[],mappings:";AACA;EACE,gBAAgB;EAChB,OAAO;EACP,UAAU;EACV,QAAQ;EACR,SAAS;EACT,+BAA+B;EAC/B,cAAc;CACf;AACD;IACI,aAAa;IACb,cAAc;IACd,oBAAoB;IACpB,mBAAmB;IACnB,SAAS;IACT,UAAU;IACV,yCAAyC;YACjC,iCAAiC;IACzC,mBAAmB;IACnB,mBAAmB;CACtB;AACD;MACM,YAAY;MACZ,aAAa;MACb,gBAAgB;MAChB,eAAe;MACf,iBAAiB;MACjB,0BAA0B;MAC1B,+BAA+B;cACvB,uBAAuB;CACpC;AACD;MACM,eAAe;MACf,kBAAkB;MAClB,gBAAgB;MAChB,+BAA+B;cACvB,uBAAuB;CACpC;AACD;MACM,sBAAsB;MACtB,aAAa;MACb,aAAa;MACb,kBAAkB;MAClB,mBAAmB;MACnB,aAAa;MACb,oBAAoB;MACpB,cAAc;CACnB;AACD;QACQ,0BAA0B;CACjC;AACD;MACM,YAAY;MACZ,aAAa;MACb,mBAAmB;MACnB,UAAU;MACV,QAAQ;MACR,mBAAmB;MACnB,gBAAgB;MAChB,+BAA+B;cACvB,uBAAuB;CACpC;AACD;QACQ,sBAAsB;QACtB,aAAa;QACb,kBAAkB;QAClB,gBAAgB;QAChB,eAAe;QACf,oBAAoB;QACpB,mBAAmB;QACnB,mBAAmB;QACnB,gBAAgB;CACvB;AACD;QACQ,eAAe;CACtB;AACD;UACU,eAAe;CACxB;AACD;QACQ,oBAAoB;CAC3B;AACD;UACU,oBAAoB;CAC7B;AACD;UACU,oBAAoB;CAC7B;AACD;QACQ,eAAe;QACf,oBAAoB;CAC3B;AACD;UACU,oBAAoB;CAC7B;AACD;MACM,mBAAmB;MACnB,UAAU;MACV,YAAY;MACZ,YAAY;MACZ,aAAa;MACb,kBAAkB;MAClB,mBAAmB;MACnB,gBAAgB;MAChB,gBAAgB;CACrB;AACD;QACQ,iBAAiB;CACxB;AACD;EACE,oBAAoB;CACrB;AACD;EACE,kBAAkB;CACnB;AACD;EACE,gBAAgB;CACjB",file:"roleAssignment.vue",sourcesContent:["\n.dialog[data-v-3609d013] {\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: rgba(0, 0, 0, 0.6);\n  z-index: 2000;\n}\n.dialog .dialog-container[data-v-3609d013] {\n    width: 450px;\n    height: 300px;\n    background: #ffffff;\n    position: absolute;\n    top: 45%;\n    left: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    border-radius: 8px;\n    position: relative;\n}\n.dialog .dialog-container .dialog-title[data-v-3609d013] {\n      width: 100%;\n      height: 60px;\n      font-size: 18px;\n      color: #696969;\n      font-weight: 600;\n      padding: 16px 50px 0 20px;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\n.dialog .dialog-container .content[data-v-3609d013] {\n      color: #797979;\n      line-height: 26px;\n      padding: 0 20px;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\n.dialog .dialog-container .inp[data-v-3609d013] {\n      margin: 10px 0 0 20px;\n      width: 200px;\n      height: 40px;\n      padding-left: 4px;\n      border-radius: 4px;\n      border: none;\n      background: #efefef;\n      outline: none;\n}\n.dialog .dialog-container .inp[data-v-3609d013]:focus {\n        border: 1px solid #509EE3;\n}\n.dialog .dialog-container .btns[data-v-3609d013] {\n      width: 100%;\n      height: 60px;\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      text-align: center;\n      padding: 0 16px;\n      -webkit-box-sizing: border-box;\n              box-sizing: border-box;\n}\n.dialog .dialog-container .btns > div[data-v-3609d013] {\n        display: inline-block;\n        height: 40px;\n        line-height: 40px;\n        padding: 0 14px;\n        color: #ffffff;\n        background: #f1f1f1;\n        border-radius: 8px;\n        margin-right: 12px;\n        cursor: pointer;\n}\n.dialog .dialog-container .btns .default-btn[data-v-3609d013] {\n        color: #787878;\n}\n.dialog .dialog-container .btns .default-btn[data-v-3609d013]:hover {\n          color: #509EE3;\n}\n.dialog .dialog-container .btns .danger-btn[data-v-3609d013] {\n        background: #EF8C8C;\n}\n.dialog .dialog-container .btns .danger-btn[data-v-3609d013]:hover {\n          background: #e08787;\n}\n.dialog .dialog-container .btns .danger-btn[data-v-3609d013]:active {\n          background: #EF8C8C;\n}\n.dialog .dialog-container .btns .confirm-btn[data-v-3609d013] {\n        color: #ffffff;\n        background: #509EE3;\n}\n.dialog .dialog-container .btns .confirm-btn[data-v-3609d013]:hover {\n          background: #6FB0EB;\n}\n.dialog .dialog-container .close-btn[data-v-3609d013] {\n      position: absolute;\n      top: 16px;\n      right: 16px;\n      width: 30px;\n      height: 30px;\n      line-height: 30px;\n      text-align: center;\n      font-size: 18px;\n      cursor: pointer;\n}\n.dialog .dialog-container .close-btn[data-v-3609d013]:hover {\n        font-weight: 600;\n}\n.el-dropdown[data-v-3609d013] {\n  vertical-align: top;\n}\n.el-dropdown + .el-dropdown[data-v-3609d013] {\n  margin-left: 15px;\n}\n.el-icon-arrow-down[data-v-3609d013] {\n  font-size: 12px;\n}\n"],sourceRoot:""}])},nZZb:function(t,e,n){var a=n("SEUm");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("a067c1ac",a,!0)},pt3A:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("mvHQ");var a={name:"roleAssignment",props:{value:{},type:{type:String,default:"default"},content:{type:String,default:""},title:{type:String,default:"教师分配"},cancelText:{type:String,default:"取消分配"},confirmText:{type:String,default:"完成分配"},RoleId:""},data:function(){return{fff:!1,isAble:[!1],showMask:!1,listQuery:{unitId:"",catalogue:""},catalogueList:[],catalogueList_t:[],values:[],teacherList:[],CataloguesIds:[],selectedAllCatalogueIds:[],catalogueRoleId:"",catalogueId:"",selectedOptions:[]}},methods:{closeMask:function(){this.showMask=!1},closeBtn:function(){this.$emit("cancel");for(var t=0;t<this.values.length;t++)this.values[t]=null;this.closeMask()},confirmBtn:function(){this.addAllCatalogueTeacher();for(var t=0;t<this.values.length;t++)this.values[t]=null;this.$emit("confirm"),this.closeMask()},getTeacherAllCatalogues:function(t){var e=this;this.api({url:"/catalogue/getTeacherAllCatalogues",method:"get",params:{tId:t}}).then(function(t){for(var n in e.CataloguesIds=t.list,e.catalogueList_t=e.catalogueList,e.CataloguesIds){var a=e.CataloguesIds[n].cCatalogue_id;for(var i in e.catalogueList)if(e.catalogueList[i].id!=a){var o=e.catalogueList[i].subCatalogueList;if(0!=o.length)for(var s in o)o[s].id==a&&e.catalogueList_t[i].subCatalogueList.splice(s,1)}else e.catalogueList_t.splice(i,1)}}).catch(function(t){})},getTeacherByCatalogueId:function(t,e){var n=this;this.api({url:"/catalogue/getTeacherByCatalogueId",method:"get",params:{tId:t,cId:e}}).then(function(t){n.catalogueRoleId=t.list[0],n.catalogueId=e}).catch(function(t){})},checkCataloguerList:function(t,e){this.selectedAllCatalogueIds[e]=t;for(var n=0;n<this.CataloguesIds.length;n++)if(this.isAble[e]=!1,this.CataloguesIds[n].cCatalogue_id==t)return this.$message({type:"warning",message:"该教师已经存在在此栏目，请重新选择！"}),this.isAble[e]=!0,!1;return!0},addCatalogueTeacher:function(){var t=this;this.api({url:"/catalogue/addCatalogueTeacher",method:"post",data:{tIds:this.RoleId,cId:this.catalogueId}}).then(function(e){t.$message.success("添加成功")}).catch(function(e){t.$message.warning("请勾选要分配的教师栏目")})},addAllCatalogueTeacher:function(){for(var t=this,e=[],n=0;n<this.selectedAllCatalogueIds.length;n++){if(!this.checkCataloguerList(this.selectedAllCatalogueIds[n]))return this.$message({type:"error",message:"分配失败,请重新选择！"}),!1;null!=this.selectedAllCatalogueIds[n]&&e.push(this.selectedAllCatalogueIds[n])}this.api({url:"/catalogue/addCatalogueTeacher",method:"post",data:{tIds:this.RoleId,cId:e}}).then(function(e){t.$message.success("添加成功")}).catch(function(e){t.$message.warning("请重新分配的教师")})},getCatalogues:function(){var t=this;this.listQuery.unitId=this.$store.state.user.unitId,this.api({url:"/catalogue/getCatalogues",method:"get",params:this.listQuery}).then(function(e){t.catalogueList=e.list}).catch(function(t){})},updateCatalogues:function(t,e){var n=this;this.api({url:"/catalogue/updateCatalogueTeacher",method:"post",data:{ctId:e,cId:t}}).then(function(t){n.$message.success("更改教师角色分配成功")}).catch(function(t){n.$message.error("QAQ.....")})}},created:function(){this.getCatalogues(),this.getTeacherByCatalogueId()},mounted:function(){this.showMask=this.value},watch:{value:function(t,e){this.showMask=t},showMask:function(t){this.$emit("input",t)}}},i=n("XyMi");var o=function(t){n("ZPbt")},s=Object(i.a)(a,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showMask,expression:"showMask"}],staticClass:"dialog"},[n("div",{staticClass:"dialog-container"},[n("div",{staticClass:"dialog-title"},[t._v("教师分配")]),t._v(" "),t._l(t.catalogueList_t,function(e,a){return n("div",{key:"cId"+e.id,staticStyle:{"margin-bottom":"10px","text-align":"center"}},[0!=Object.keys(e.subCatalogueList).length?n("el-select",{attrs:{placeholder:e.name},model:{value:t.values[a],callback:function(e){t.$set(t.values,a,e)},expression:"values[flag]"}},t._l(e.subCatalogueList,function(e){return n("el-option",{key:e.name,attrs:{label:e.label,value:e.name},nativeOn:{click:function(n){t.getTeacherByCatalogueId(t.RoleId,e.id),t.checkCataloguerList(e.id,a)}}})})):t._e(),t._v(" "),0===Object.keys(e.subCatalogueList).length?n("el-select",{attrs:{placeholder:e.name},model:{value:t.values[a],callback:function(e){t.$set(t.values,a,e)},expression:"values[flag]"}},[n("el-option",{key:e.name,attrs:{label:e.label,value:e.name},nativeOn:{click:function(n){t.getTeacherByCatalogueId(t.RoleId,e.id),t.checkCataloguerList(e.id,a)}}})],1):t._e()],1)}),t._v(" "),n("div",{staticClass:"btns"},["confirm"!==t.type?n("div",{staticClass:"default-btn",on:{click:t.closeBtn}},[t._v("\n          "+t._s(t.cancelText)+"\n        ")]):t._e(),t._v(" "),n("div",{staticClass:"confirm-btn",staticStyle:{"margin-left":"20px"},on:{click:t.confirmBtn}},[t._v("\n          "+t._s(t.confirmText)+"\n        ")])]),t._v(" "),n("div",{staticClass:"close-btn",on:{click:t.closeMask}},[n("i",{staticClass:"iconfont icon-close"})])],2)])},[],!1,o,"data-v-3609d013",null);e.default=s.exports}});