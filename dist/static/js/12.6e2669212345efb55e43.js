webpackJsonp([12],{H5Kh:function(t,e,o){var a=o("X99N");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o("rjj0")("4b203390",a,!0)},PDwi:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("mvHQ");var a={data:function(){return{defaultLogo:'this.src="http://www.scholat.com/images/uni_logo/nologo.png"',defaultBack:'this.src="http://47.106.132.95:2333/images/background/1569738575202258.png"',applyForm:{schoolName:"",unitName:"",schoolEng:"",unitEng:"",collegeUrl:"",logoUrl:"1",unitId:"",state:"",backgroundUrl:""},showLogo:"",showBack:"",applyRules:{collegeUrl:[{required:!0,message:"学院主页链接不能为空"}],collegeLogo:[{required:!0,message:"学院图标不能为空",trigger:"change"}],backSelect:[{required:!0,message:"背景模式不能为空",trigger:"change"}]}}},created:function(){this.getUnitInfo()},ready:function(){},computed:{},methods:{getUnitInfo:function(){var t=this;this.api({url:"/unit/getUnitInfo",method:"get",params:{unitId:this.$store.getters.unitId}}).then(function(e){t.applyForm=e,null!=e.logoUrl&&-1==e.logoUrl.indexOf("scholat")?t.showLogo="http://47.106.132.95:2333/images/unit_logo/"+e.logoUrl:t.showLogo=e.logoUrl,t.showBack="http://47.106.132.95:2333/images/background/"+e.backgroundUrl}).catch(function(t){})},cropImageCallback:function(t,e){this.$message.success("上传"+t+"成功"),-1!=e.indexOf("unit")&&(this.showLogo=this.$refs.cropImage.attach.laterUrl,this.applyForm.logoUrl=t),-1!=e.indexOf("background")&&(this.showBack=this.$refs.cropImage.attach.laterUrl,this.applyForm.backgroundUrl=t)},uploadImage:function(t){this.$refs.cropImage.transportMessage(t),this.$refs.cropImage.dialogVisible=!0},restoreImage:function(t){1==t?(this.applyForm.logoUrl="http://www.scholat.com/images/uni_logo/"+this.applyForm.schoolName+".png",this.showLogo="http://www.scholat.com/images/uni_logo/"+this.applyForm.schoolName+".png"):(this.applyForm.backgroundUrl="http://47.106.132.95:2333/images/background/1569738575202258.png",this.showBack="http://47.106.132.95:2333/images/background/1569738575202258.png")},handleApply:function(t){var e=this;this.$confirm("确定修改学院信息?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$refs.applyForm.validate(function(t){if(!t)return e.$message.error("提交失败，请检查填写信息"),!1;e.submitForm()})}).catch(function(){e.$message({type:"info",message:"已取消提交"})})},submitForm:function(){var t=this;this.applyForm.unitId=this.$store.getters.unitId,this.api({url:"/unit/updateUnitInfo",method:"post",data:this.applyForm}).then(function(e){t.$message.success("提交成功")}).catch(function(e){t.$message.error("提交失败")})}},components:{cropImage:o("khXb").default}},n=o("XyMi");var l=function(t){o("H5Kh")},i=Object(n.a)(a,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container",staticStyle:{"padding-top":"30px"}},[o("el-form",{ref:"applyForm",attrs:{model:t.applyForm,rules:t.applyRules,"label-width":"150px"}},[o("el-form-item",{attrs:{label:"学校名称："}},[o("el-input",{staticStyle:{width:"50%"},attrs:{disabled:""},model:{value:t.applyForm.schoolName,callback:function(e){t.$set(t.applyForm,"schoolName",e)},expression:"applyForm.schoolName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"学校英文名称："}},[o("el-input",{staticStyle:{width:"50%"},attrs:{disabled:""},model:{value:t.applyForm.schoolEng,callback:function(e){t.$set(t.applyForm,"schoolEng",e)},expression:"applyForm.schoolEng"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"学院名称："}},[o("el-input",{staticStyle:{width:"50%"},attrs:{disabled:""},model:{value:t.applyForm.unitName,callback:function(e){t.$set(t.applyForm,"unitName",e)},expression:"applyForm.unitName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"学院英文名称："}},[o("el-input",{staticStyle:{width:"50%"},attrs:{disabled:""},model:{value:t.applyForm.unitEng,callback:function(e){t.$set(t.applyForm,"unitEng",e)},expression:"applyForm.unitEng"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"学院链接：",prop:"collegeUrl"}},[o("el-input",{staticStyle:{width:"50%"},model:{value:t.applyForm.collegeUrl,callback:function(e){t.$set(t.applyForm,"collegeUrl",e)},expression:"applyForm.collegeUrl"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"学院图标："}},[o("div",{staticStyle:{"margin-left":"15px"}},[o("img",{staticStyle:{width:"120px"},attrs:{src:t.showLogo,onerror:t.defaultLogo}})]),t._v(" "),o("div",{staticStyle:{color:"red"}},[t._v("提示：如上方显示的不是贵校的图标，可点击下方按钮自行上传图标")]),t._v(" "),o("div",[o("el-button",{staticStyle:{"margin-top":"7px",float:"left"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.uploadImage("unit")}}},[t._v("上传学校LOGO")]),t._v(" "),o("el-button",{staticStyle:{"margin-left":"35px"},attrs:{size:"mini"},on:{click:function(e){t.restoreImage(1)}}},[t._v("恢复系统默认")])],1)]),t._v(" "),o("el-form-item",{attrs:{label:"背景模式"}},[o("el-radio-group",{model:{value:t.applyForm.state,callback:function(e){t.$set(t.applyForm,"state",e)},expression:"applyForm.state"}},[o("el-radio",{attrs:{label:0}},[t._v("默认模式")]),t._v(" "),o("el-radio",{attrs:{label:1}},[t._v("自定义背景")])],1)],1),t._v(" "),1==t.applyForm.state?o("el-form-item",{attrs:{label:"自定义背景："}},[o("div",{staticStyle:{"margin-left":"15px"}},[o("img",{staticStyle:{width:"420px",height:"72px"},attrs:{src:t.showBack,onerror:t.defaultBack}})]),t._v(" "),o("div",{staticStyle:{color:"red"}},[t._v("提示：点击下方按钮自行上传背景图片")]),t._v(" "),o("div",[o("el-button",{staticStyle:{"margin-top":"7px",float:"left"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.uploadImage("background")}}},[t._v("上传背景图片")]),t._v(" "),o("el-button",{staticStyle:{"margin-left":"35px"},attrs:{size:"mini"},on:{click:function(e){t.restoreImage(0)}}},[t._v("恢复系统默认")])],1)]):t._e(),t._v(" "),o("crop-image",{ref:"cropImage",on:{"crop-url-callback":t.cropImageCallback}}),t._v(" "),o("el-form-item",{attrs:{label:"操作："}},[o("el-button",{staticClass:"finish-button",attrs:{type:"success",size:"mini"},on:{click:function(e){t.handleApply("applyForm")}}},[t._v("\n        确定提交\n      ")])],1)],1)],1)},[],!1,l,"data-v-9160c11c",null);e.default=i.exports},X99N:function(t,e,o){(t.exports=o("FZ+f")(!0)).push([t.i,"\n.container[data-v-9160c11c] {\n  position: relative;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: row;\n          flex-flow: row;\n  -ms-flex-wrap: nowrap;\n      flex-wrap: nowrap;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  width: 100%;\n  height: 100%;\n  margin: 0 auto;\n}\n","",{version:3,sources:["/Users/achunorigin/project/A_Postgraduate/persona-teacher/persona-teacherHome-front/src/views/unitInfo/unitInfo.vue"],names:[],mappings:";AACA;EACE,mBAAmB;EACnB,+BAA+B;EAC/B,8BAA8B;MAC1B,mBAAmB;UACf,eAAe;EACvB,sBAAsB;MAClB,kBAAkB;EACtB,wBAAwB;MACpB,qBAAqB;UACjB,4BAA4B;EACpC,0BAA0B;MACtB,uBAAuB;UACnB,oBAAoB;EAC5B,YAAY;EACZ,aAAa;EACb,eAAe;CAChB",file:"unitInfo.vue",sourcesContent:["\n.container[data-v-9160c11c] {\n  position: relative;\n  -webkit-box-orient: horizontal;\n  -webkit-box-direction: normal;\n      -ms-flex-flow: row;\n          flex-flow: row;\n  -ms-flex-wrap: nowrap;\n      flex-wrap: nowrap;\n  -webkit-box-pack: start;\n      -ms-flex-pack: start;\n          justify-content: flex-start;\n  -webkit-box-align: center;\n      -ms-flex-align: center;\n          align-items: center;\n  width: 100%;\n  height: 100%;\n  margin: 0 auto;\n}\n"],sourceRoot:""}])}});